# Gemini CLI ツール

Gemini CLI には、Gemini モデルがローカル環境と相互作用し、情報にアクセスし、アクションを実行するために使用する組み込みツールが含まれています。これらのツールは CLI の機能を強化し、テキスト生成を超えて幅広いタスクを支援できるようにします。

## Gemini CLI ツールの概要

Gemini CLI のコンテキストにおいて、ツールは Gemini モデルが実行を要求できる特定の機能またはモジュールです。例えば、Gemini に「`my_document.txt` の内容を要約して」と依頼すると、モデルはそのファイルを読む必要があることを特定し、`read_file` ツールの実行を要求する可能性があります。

コアコンポーネント（`packages/core`）がこれらのツールを管理し、その定義（スキーマ）を Gemini モデルに提示し、要求時に実行し、結果をモデルに返してユーザー向け応答にさらに処理します。

これらのツールは以下の機能を提供します：

- **ローカル情報へのアクセス:** ツールにより Gemini はローカルファイルシステムにアクセスし、ファイル内容を読み取り、ディレクトリを一覧表示するなどが可能になります。
- **コマンドの実行:** `run_shell_command` のようなツールで、Gemini はシェルコマンドを実行できます（適切な安全措置とユーザー確認付き）。
- **Web との相互作用:** ツールは URL からコンテンツを取得できます。
- **アクションの実行:** ツールはファイルの変更、新しいファイルの書き込み、またはシステム上での他のアクションを実行できます（通常、セーフガード付き）。
- **応答の根拠付け:** ツールを使用してリアルタイムまたは特定のローカルデータを取得することで、Gemini の応答をより正確で関連性が高く、実際のコンテキストに根ざしたものにできます。

## Gemini CLI ツールの使用方法

Gemini CLI ツールを使用するには、Gemini CLI にプロンプトを提供します。プロセスは以下のように機能します：

1.  Gemini CLI にプロンプトを提供します。
2.  CLI がプロンプトをコアに送信します。
3.  コアは、プロンプトと会話履歴と共に、利用可能なツールとその説明/スキーマのリストを Gemini API に送信します。
4.  Gemini モデルがリクエストを分析します。ツールが必要と判断した場合、その応答には特定のパラメータで特定のツールを実行するリクエストが含まれます。
5.  コアがこのツールリクエストを受信し、検証し、（機密操作のためにユーザー確認の後で）ツールを実行します。
6.  ツールからの出力が Gemini モデルに送り返されます。
7.  Gemini モデルがツールの出力を使用して最終回答を策定し、コアを通じて CLI に送り返され、表示されます。

通常、CLI でツールが呼び出されているとき、および成功または失敗したかを示すメッセージが表示されます。

## セキュリティと確認

多くのツール、特にファイルシステムを変更したりコマンドを実行できるもの（`write_file`、`edit`、`run_shell_command`）は、安全性を念頭に置いて設計されています。Gemini CLI は通常以下を行います：

- **確認を要求:** 潜在的に機密な操作を実行する前にプロンプトを表示し、実行されようとしているアクションを示します。
- **サンドボックスの利用:** すべてのツールはサンドボックスによって強制される制限の対象です（[README](../../README.md#sandboxing) を参照）。これは、サンドボックス内で動作している場合、使用したい任意のツール（MCP サーバーを含む）がサンドボックス環境内で利用可能でなければならないことを意味します。例えば、`npx` を通じて MCP サーバーを実行するには、`npx` 実行ファイルがサンドボックスの Docker イメージ内にインストールされているか、`sandbox-exec` 環境で利用可能である必要があります。

ツールの実行を許可する前に、常に確認プロンプトを注意深く確認することが重要です。

## Gemini CLI ツールの詳細

Gemini CLI の組み込みツールは大まかに以下のように分類できます：

- **[ファイルシステムツール](./file-system.md):** ファイルとディレクトリとの相互作用（読み取り、書き込み、一覧表示、検索など）用。
- **[シェルツール](./shell.md) (`run_shell_command`):** シェルコマンドの実行用。
- **[Web フェッチツール](./web-fetch.md) (`web_fetch`):** URL からのコンテンツ取得用。
- **[Web 検索ツール](./web-search.md) (`web_search`):** Web 検索用。
- **[マルチファイル読み取りツール](./multi-file.md) (`read_many_files`):** 複数のファイルまたはディレクトリからコンテンツを読み取るための専門ツールで、`@` コマンドによってよく使用されます。
- **[メモリツール](./memory.md) (`save_memory`):** セッション間での情報の保存と呼び出し用。

さらに、これらのツールには以下が組み込まれています：

- **[MCP サーバー](./mcp-server.md)**: MCP サーバーは Gemini モデルとローカル環境または API などの他のサービスとの間のブリッジとして機能します。
- **[サンドボックス](../sandbox.md)**: サンドボックスはモデルとその変更を環境から隔離し、潜在的リスクを軽減します。