# CLI コマンド

Gemini CLI は、セッションの管理、インターフェースのカスタマイズ、動作の制御を支援するいくつかの組み込みコマンドをサポートしています。これらのコマンドには、フォワードスラッシュ（`/`）、アットマーク（`@`）、または感嘆符（`!`）の接頭辞が付きます。

## スラッシュコマンド（`/`）

スラッシュコマンドは CLI 自体のメタレベル制御を提供します。

- **`/bug`**
  - **説明:** Gemini CLI についての問題を報告します。デフォルトでは、問題は Gemini CLI の GitHub リポジトリに提出されます。`/bug` の後に入力した文字列が、提出される問題のヘッドラインになります。デフォルトの `/bug` 動作は、`.gemini/settings.json` ファイルの `bugCommand` 設定を使用して変更できます。

- **`/chat`**
  - **説明:** 分岐会話状態の対話的な保存・再開、または後のセッションでの以前の状態の再開のための会話履歴の保存と再開。
  - **サブコマンド:**
    - **`save`**
      - **説明:** 現在の会話履歴を保存します。会話状態を識別するための `<tag>` を追加する必要があります。
      - **使用法:** `/chat save <tag>`
    - **`resume`**
      - **説明:** 以前の保存から会話を再開します。
      - **使用法:** `/chat resume <tag>`
    - **`list`**
      - **説明:** チャット状態再開のために利用可能なタグを一覧表示します。

- **`/clear`**
  - **説明:** CLI 内の可視セッション履歴とスクロールバックを含むターミナル画面をクリアします。基礎となるセッションデータ（履歴の呼び出し用）は正確な実装によって保持される場合がありますが、視覚的な表示はクリアされます。
  - **キーボードショートカット:** いつでも **Ctrl+L** を押すとクリア操作が実行されます。

- **`/compress`**
  - **説明:** チャットコンテキスト全体を要約で置き換えます。これにより、将来のタスクで使用されるトークンを節約しながら、何が起こったかの高レベル要約を保持します。

- **`/editor`**
  - **説明:** サポートされているエディターを選択するためのダイアログを開きます。

- **`/help`**（または **`/?`**）
  - **説明:** 利用可能なコマンドとその使用法を含む Gemini CLI についてのヘルプ情報を表示します。

- **`/mcp`**
  - **説明:** 設定された Model Context Protocol（MCP）サーバー、その接続状態、サーバー詳細、利用可能なツールを一覧表示します。
  - **サブコマンド:**
    - **`desc`** または **`descriptions`**:
      - **説明:** MCP サーバーとツールの詳細な説明を表示します。
    - **`nodesc`** または **`nodescriptions`**:
      - **説明:** ツールの説明を非表示にし、ツール名のみを表示します。
    - **`schema`**:
      - **説明:** ツールの設定されたパラメータの完全な JSON スキーマを表示します。
  - **キーボードショートカット:** いつでも **Ctrl+T** を押すと、ツールの説明の表示と非表示を切り替えます。

- **`/memory`**
  - **説明:** AI の指示コンテキスト（`GEMINI.md` ファイルから読み込まれた階層メモリ）を管理します。
  - **サブコマンド:**
    - **`add`**:
      - **説明:** 以下のテキストを AI のメモリに追加します。使用法：`/memory add <覚えるテキスト>`
    - **`show`**:
      - **説明:** すべての `GEMINI.md` ファイルから読み込まれた現在の階層メモリの完全な連結コンテンツを表示します。これにより、Gemini モデルに提供されている指示コンテキストを確認できます。
    - **`refresh`**:
      - **説明:** 設定された場所（グローバル、プロジェクト/祖先、サブディレクトリ）で見つかったすべての `GEMINI.md` ファイルから階層指示メモリを再読み込みします。このコマンドは最新の `GEMINI.md` コンテンツでモデルを更新します。
    - **注意:** `GEMINI.md` ファイルが階層メモリにどのように貢献するかの詳細については、[CLI 設定ドキュメント](./configuration.md#4-geminimd-files-hierarchical-instructional-context) を参照してください。

- **`/restore`**
  - **説明:** プロジェクトファイルをツールが実行される直前の状態に復元します。これは、ツールによって行われたファイル編集を元に戻すのに特に便利です。ツール呼び出し ID なしで実行すると、復元可能なチェックポイントが一覧表示されます。
  - **使用法:** `/restore [tool_call_id]`
  - **注意:** CLI が `--checkpointing` オプションで呼び出されるか、[設定](./configuration.md) で設定されている場合のみ利用可能です。詳細については [チェックポイントドキュメント](../checkpointing.md) を参照してください。

- **`/stats`**
  - **説明:** トークン使用量、キャッシュされたトークンの節約（利用可能な場合）、セッション期間を含む現在の Gemini CLI セッションの詳細統計を表示します。注意：キャッシュされたトークン情報は、キャッシュされたトークンが使用されている場合のみ表示されます。これは API キー認証では発生しますが、現時点では OAuth 認証では発生しません。

- [**`/theme`**](./themes.md)
  - **説明:** Gemini CLI の視覚テーマを変更できるダイアログを開きます。

- **`/auth`**
  - **説明:** 認証方法を変更できるダイアログを開きます。

- **`/about`**
  - **説明:** バージョン情報を表示します。問題を報告する際は、この情報を共有してください。

- [**`/tools`**](../tools/index.md)
  - **説明:** Gemini CLI 内で現在利用可能なツールのリストを表示します。
  - **サブコマンド:**
    - **`desc`** または **`descriptions`**:
      - **説明:** モデルに提供される完全な説明を含む各ツールの名前など、各ツールの詳細な説明を表示します。
    - **`nodesc`** または **`nodescriptions`**:
      - **説明:** ツールの説明を非表示にし、ツール名のみを表示します。

- **`/quit`**（または **`/exit`**）
  - **説明:** Gemini CLI を終了します。

## アットコマンド（`@`）

アットコマンドは、ファイルまたはディレクトリの内容を Gemini へのプロンプトの一部として含めるために使用されます。これらのコマンドには git 対応フィルタリングが含まれています。

- **`@<ファイルまたはディレクトリへのパス>`**
  - **説明:** 指定されたファイルまたはファイル群の内容を現在のプロンプトに注入します。これは、特定のコード、テキスト、またはファイルの集合について質問するのに便利です。
  - **例:**
    - `@path/to/your/file.txt このテキストを説明してください。`
    - `@src/my_project/ このディレクトリのコードを要約してください。`
    - `このファイルは何についてですか？ @README.md`
  - **詳細:**
    - 単一ファイルへのパスが提供された場合、そのファイルの内容が読み取られます。
    - ディレクトリへのパスが提供された場合、コマンドはそのディレクトリとサブディレクトリ内のファイルの内容を読み取ろうとします。
    - パス内のスペースはバックスラッシュでエスケープする必要があります（例：`@My\ Documents/file.txt`）。
    - コマンドは内部的に `read_many_files` ツールを使用します。コンテンツが取得され、Gemini モデルに送信される前にクエリに挿入されます。
    - **Git 対応フィルタリング:** デフォルトでは、git に無視されるファイル（`node_modules/`、`dist/`、`.env`、`.git/` など）は除外されます。この動作は `fileFiltering` 設定で変更できます。
    - **ファイル種類:** コマンドはテキストベースのファイルを対象としています。任意のファイルを読み取ろうとする場合がありますが、バイナリファイルや非常に大きなファイルは、パフォーマンスと関連性を確保するために基盤となる `read_many_files` ツールによってスキップまたは切り捨てられる場合があります。ツールはファイルがスキップされた場合に示します。
  - **出力:** CLI は `read_many_files` が使用されたことを示すツール呼び出しメッセージと、状態と処理されたパスの詳細を示すメッセージを表示します。

- **`@`（単独のアットシンボル）**
  - **説明:** パスなしで単独の `@` シンボルを入力すると、クエリはそのまま Gemini モデルに渡されます。これは、プロンプト内で `@` シンボル自体について特に話している場合に便利な場合があります。

### `@` コマンドのエラーハンドリング

- `@` の後に指定されたパスが見つからないか無効な場合、エラーメッセージが表示され、クエリは Gemini モデルに送信されないか、ファイル内容なしで送信されます。
- `read_many_files` ツールがエラー（権限の問題など）に遭遇した場合、これも報告されます。

## シェルモードとパススルーコマンド（`!`）

`!` 接頭辞により、Gemini CLI 内から直接システムのシェルと相互作用できます。

- **`!<シェルコマンド>`**
  - **説明:** 指定された `<シェルコマンド>` をシステムのデフォルトシェルで実行します。コマンドからの出力やエラーはターミナルに表示されます。
  - **例:**
    - `!ls -la`（`ls -la` を実行して Gemini CLI に戻る）
    - `!git status`（`git status` を実行して Gemini CLI に戻る）

- **`!`（シェルモードの切り替え）**
  - **説明:** `!` を単独で入力するとシェルモードが切り替わります。
    - **シェルモード開始:**
      - アクティブな場合、シェルモードは異なる色と「シェルモードインジケーター」を使用します。
      - シェルモード中、入力したテキストは直接シェルコマンドとして解釈されます。
    - **シェルモード終了:**
      - 終了すると、UI は標準の外観に戻り、通常の Gemini CLI 動作が再開されます。

- **すべての `!` 使用に関する注意:** シェルモードで実行するコマンドは、ターミナルで直接実行した場合と同じ権限と影響を持ちます。